# LifeBit 프로젝트 설치 작업 오류 해결 가이드

## 📋 목차
1. [환경 설정 오류](#환경-설정-오류)
2. [Docker 관련 오류](#docker-관련-오류)
3. [Node.js/Pnpm 관련 오류](#nodejspnpm-관련-오류)
4. [Python/FastAPI 관련 오류](#pythonfastapi-관련-오류)
5. [Spring Boot 관련 오류](#spring-boot-관련-오류)
6. [데이터베이스 연결 오류](#데이터베이스-연결-오류)
7. [포트 충돌 오류](#포트-충돌-오류)
8. [프론트엔드 빌드 오류](#프론트엔드-빌드-오류)

---

## 🔧 환경 설정 오류

### 1. Java SDK 버전 문제
**오류 현상:**
```bash
Error: Java version 17 or higher is required
```

**원인:** Spring Boot 3.x는 Java 17 이상이 필요하지만, 시스템에 Java 8이나 11이 설치되어 있는 경우

**해결 방법:**
```bash
# Java 버전 확인
java -version

# Java 21 설치 (Windows)
# 1. Oracle JDK 21 다운로드 후 설치
# 2. 환경변수 설정
set JAVA_HOME=C:\Program Files\Java\jdk-21
set PATH=%JAVA_HOME%\bin;%PATH%

# 또는 OpenJDK 사용
# https://adoptium.net/ 에서 다운로드
```

**주석:** Spring Boot 3.x는 Java 17+를 요구하므로 반드시 최신 버전 설치 필요

### 2. Python 버전 문제
**오류 현상:**
```bash
SyntaxError: invalid syntax
ModuleNotFoundError: No module named 'uvicorn'
```

**원인:** Python 3.13.5가 아닌 다른 버전이 설치되어 있거나, 가상환경이 제대로 활성화되지 않은 경우

**해결 방법:**
```bash
# Python 버전 확인
python --version

# Python 3.13.5 설치 (Windows)
# 1. https://www.python.org/downloads/ 에서 다운로드
# 2. 설치 시 "Add Python to PATH" 체크

# 가상환경 재생성
cd apps/ai-api-fastapi
rm -rf venv  # 또는 rmdir /s venv (Windows)
python -m venv venv
venv\Scripts\activate  # Windows
```

**주석:** FastAPI와 uvicorn은 Python 3.7+를 요구하지만, 프로젝트에서는 3.13.5 사용

---

## 🐳 Docker 관련 오류

### 1. Docker 서비스 미실행
**오류 현상:**
```bash
Cannot connect to the Docker daemon
```

**원인:** Docker Desktop이 실행되지 않았거나 Docker 서비스가 중지된 경우

**해결 방법:**
```bash
# 1. Docker Desktop 실행
# 2. 또는 Windows 서비스에서 Docker Desktop Service 시작

# Docker 상태 확인
docker --version
docker ps
```

**주석:** Docker Desktop은 Windows에서 WSL2 기반으로 동작하므로 WSL2 설치 필요할 수 있음

### 2. 포트 5432 충돌
**오류 현상:**
```bash
Error response from daemon: Ports are not available
```

**원인:** PostgreSQL이 이미 5432 포트를 사용 중이거나 다른 서비스가 해당 포트를 점유

**해결 방법:**
```bash
# 포트 사용 확인
netstat -ano | findstr :5432

# 기존 PostgreSQL 서비스 중지 (Windows)
net stop postgresql-x64-15

# 또는 docker-compose.yml에서 포트 변경
# ports:
#   - "5433:5432"  # 호스트 포트를 5433으로 변경
```

**주석:** 로컬에 PostgreSQL이 설치되어 있다면 반드시 중지하거나 포트를 변경해야 함

### 3. Docker 볼륨 권한 문제
**오류 현상:**
```bash
Permission denied on /var/lib/postgresql/data
```

**원인:** Windows에서 Docker 볼륨 마운트 시 권한 문제

**해결 방법:**
```bash
# Docker 볼륨 삭제 후 재생성
docker-compose down -v
docker volume rm lifebit_postgres_data
docker-compose up -d
```

**주석:** Windows에서는 WSL2 통합으로 인한 권한 문제가 발생할 수 있음

---

## 📦 Node.js/Pnpm 관련 오류

### 1. Pnpm 설치 실패
**오류 현상:**
```bash
'pnpm' is not recognized as an internal or external command
```

**원인:** Pnpm이 설치되지 않았거나 PATH에 추가되지 않은 경우

**해결 방법:**
```bash
# Node.js 설치 확인
node --version
npm --version

# Pnpm 설치
npm install -g pnpm

# 또는 공식 설치 스크립트 사용
# Windows PowerShell
iwr https://get.pnpm.io/install.ps1 -useb | iex
```

**주석:** Pnpm은 Node.js 패키지 매니저로, npm보다 빠르고 디스크 공간을 절약함

### 2. 의존성 설치 실패
**오류 현상:**
```bash
ERR_PNPM_NO_MATCHING_VERSION
```

**원인:** package.json의 의존성 버전이 호환되지 않거나 네트워크 문제

**해결 방법:**
```bash
# 캐시 삭제
pnpm store prune

# node_modules 삭제 후 재설치
rm -rf node_modules
rm pnpm-lock.yaml
pnpm install

# 또는 특정 패키지 강제 설치
pnpm install --force
```

**주석:** pnpm-lock.yaml 파일을 삭제하면 의존성 버전이 재계산됨

### 3. Workspace 설정 오류
**오류 현상:**
```bash
No projects found in workspace
```

**원인:** pnpm-workspace.yaml 설정이 잘못되었거나 프로젝트 구조 문제

**해결 방법:**
```bash
# pnpm-workspace.yaml 확인
cat pnpm-workspace.yaml

# 올바른 설정
packages:
  - 'apps/*'
  - 'packages/*'

# 루트에서 재설치
pnpm install
```

**주석:** Monorepo 구조에서 workspace 설정이 올바르지 않으면 패키지 인식 실패

---

## 🐍 Python/FastAPI 관련 오류

### 1. 가상환경 활성화 실패
**오류 현상:**
```bash
'venv\Scripts\activate' is not recognized
```

**원인:** 가상환경이 제대로 생성되지 않았거나 PowerShell 실행 정책 문제

**해결 방법:**
```bash
# PowerShell 실행 정책 변경
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser

# 또는 CMD 사용
venv\Scripts\activate.bat

# 가상환경 재생성
python -m venv venv --clear
```

**주석:** Windows에서는 PowerShell 실행 정책으로 인해 스크립트 실행이 차단될 수 있음

### 2. 의존성 설치 실패
**오류 현상:**
```bash
ERROR: Could not find a version that satisfies the requirement
```

**원인:** requirements.txt의 패키지 버전이 호환되지 않거나 네트워크 문제

**해결 방법:**
```bash
# pip 업그레이드
python -m pip install --upgrade pip

# 캐시 삭제 후 재설치
pip cache purge
pip install -r requirements.txt --no-cache-dir

# 또는 개별 패키지 설치
pip install fastapi uvicorn
```

**주석:** Python 패키지 버전 충돌 시 가상환경을 새로 생성하는 것이 가장 확실함

### 3. Uvicorn 실행 오류
**오류 현상:**
```bash
ModuleNotFoundError: No module named 'uvicorn'
```

**원인:** 가상환경이 활성화되지 않았거나 uvicorn이 설치되지 않은 경우

**해결 방법:**
```bash
# 가상환경 활성화 확인
echo $VIRTUAL_ENV  # Linux/Mac
echo %VIRTUAL_ENV% # Windows

# uvicorn 재설치
pip install uvicorn[standard]

# 실행
uvicorn main:app --reload --port 8001
```

**주석:** uvicorn[standard]는 추가 의존성을 포함하여 더 안정적인 실행을 보장함

---

## ☕ Spring Boot 관련 오류

### 1. Maven Wrapper 실행 권한 문제
**오류 현상:**
```bash
'mvnw' is not recognized as an internal or external command
```

**원인:** Windows에서 mvnw.cmd을 사용해야 하는데 mvnw를 사용한 경우

**해결 방법:**
```bash
# Windows에서는 mvnw.cmd 사용
cd apps/core-api-spring
mvnw.cmd spring-boot:run

# 또는 직접 Maven 사용
mvn spring-boot:run
```

**주석:** Maven Wrapper는 프로젝트별 Maven 버전을 관리하므로 권장됨

### 2. Java 버전 불일치
**오류 현상:**
```bash
UnsupportedClassVersionError
```

**원인:** 컴파일된 클래스와 실행 중인 Java 버전이 다름

**해결 방법:**
```bash
# Java 버전 확인
java -version
javac -version

# JAVA_HOME 설정 확인
echo %JAVA_HOME%

# Maven이 사용하는 Java 버전 확인
mvn -version
```

**주석:** Spring Boot 3.x는 Java 17+를 요구하며, 컴파일과 실행 시 동일한 버전 사용 필요

### 3. 포트 8080 충돌
**오류 현상:**
```bash
Web server failed to start. Port 8080 was already in use.
```

**원인:** 다른 애플리케이션이 8080 포트를 사용 중

**해결 방법:**
```bash
# 포트 사용 확인
netstat -ano | findstr :8080

# 프로세스 종료
taskkill /PID <PID> /F

# 또는 application.properties에서 포트 변경
# server.port=8081
```

**주석:** Spring Boot는 기본적으로 8080 포트를 사용하므로 다른 서비스와 충돌 가능

---

## 🗄️ 데이터베이스 연결 오류

### 1. PostgreSQL 연결 실패
**오류 현상:**
```bash
Connection refused
```

**원인:** Docker 컨테이너가 실행되지 않았거나 네트워크 설정 문제

**해결 방법:**
```bash
# Docker 컨테이너 상태 확인
docker ps

# 컨테이너 로그 확인
docker logs lifebit_postgres

# 컨테이너 재시작
docker-compose restart postgres-db
```

**주석:** PostgreSQL 컨테이너가 완전히 시작되기까지 10-30초 소요될 수 있음

### 2. 데이터베이스 인증 실패
**오류 현상:**
```bash
FATAL: password authentication failed
```

**원인:** 환경변수 설정이 잘못되었거나 데이터베이스 초기화 문제

**해결 방법:**
```bash
# docker-compose.yml 환경변수 확인
environment:
  - POSTGRES_DB=lifebit_db
  - POSTGRES_USER=lifebit_user
  - POSTGRES_PASSWORD=lifebit_password

# 컨테이너 재생성
docker-compose down -v
docker-compose up -d
```

**주석:** 데이터베이스 초기화 시 환경변수가 올바르게 설정되어야 함

### 3. SQL 스크립트 실행 실패
**오류 현상:**
```bash
ERROR: syntax error at or near
```

**원인:** SQL 파일의 인코딩 문제나 구문 오류

**해결 방법:**
```bash
# SQL 파일 인코딩 확인 (UTF-8)
# VS Code에서 파일 우하단 인코딩 확인

# SQL 문장별로 실행
# Ctrl+A로 전체 선택 후 Execute

# 또는 psql 사용
docker exec -it lifebit_postgres psql -U lifebit_user -d lifebit_db -f /path/to/LifeBit.SQL
```

**주석:** SQL 파일은 반드시 UTF-8 인코딩으로 저장하고, 전체 스크립트를 한 번에 실행해야 함

---

## 🔌 포트 충돌 오류

### 1. 포트 5173 충돌 (Vite)
**오류 현상:**
```bash
Port 5173 is already in use
```

**원인:** 이전 Vite 개발 서버가 백그라운드에서 실행 중

**해결 방법:**
```bash
# 포트 사용 확인
netstat -ano | findstr :5173

# 프로세스 종료
taskkill /PID <PID> /F

# 또는 다른 포트 사용
pnpm dev --port 5174
```

**주석:** Vite는 기본적으로 5173 포트를 사용하며, 개발 서버가 제대로 종료되지 않으면 포트 충돌 발생

### 2. 포트 8001 충돌 (FastAPI)
**오류 현상:**
```bash
Address already in use
```

**원인:** 이전 FastAPI 서버가 실행 중

**해결 방법:**
```bash
# 포트 사용 확인
netstat -ano | findstr :8001

# 프로세스 종료
taskkill /PID <PID> /F

# 또는 다른 포트 사용
uvicorn main:app --reload --port 8002
```

**주석:** uvicorn 서버는 Ctrl+C로 종료해야 하며, 강제 종료 시 포트가 즉시 해제되지 않을 수 있음

---

## 🎨 프론트엔드 빌드 오류

### 1. TypeScript 컴파일 오류
**오류 현상:**
```bash
TS2307: Cannot find module
```

**원인:** 타입 정의 파일 누락이나 경로 설정 문제

**해결 방법:**
```bash
# 타입 정의 설치
pnpm add -D @types/node

# tsconfig.json 확인
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  }
}
```

**주석:** TypeScript는 엄격한 타입 검사를 하므로 모든 의존성의 타입 정의가 필요

### 2. Tailwind CSS 설정 오류
**오류 현상:**
```bash
@tailwind base; not found
```

**원인:** Tailwind CSS가 제대로 설치되지 않았거나 설정 파일 문제

**해결 방법:**
```bash
# Tailwind CSS 재설치
pnpm add -D tailwindcss postcss autoprefixer

# 설정 파일 생성
npx tailwindcss init -p

# tailwind.config.ts 확인
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {},
  },
  plugins: [],
}
```

**주석:** Tailwind CSS는 JIT(Just-In-Time) 컴파일러를 사용하므로 content 배열에 모든 템플릿 파일을 포함해야 함

### 3. Vite 빌드 실패
**오류 현상:**
```bash
Build failed with errors
```

**원인:** 의존성 문제나 설정 파일 오류

**해결 방법:**
```bash
# 의존성 재설치
rm -rf node_modules
pnpm install

# Vite 캐시 삭제
rm -rf dist
pnpm dev --force

# 또는 빌드 모드로 실행
pnpm build
```

**주석:** Vite는 빠른 개발 서버를 제공하지만, 의존성 문제 시 빌드 실패 가능

---

## 📝 추가 문제 해결 팁

### 1. 로그 확인 방법
```bash
# Docker 로그
docker logs lifebit_postgres

# Spring Boot 로그
# application.properties에 추가
logging.level.root=DEBUG

# FastAPI 로그
# main.py에 추가
import logging
logging.basicConfig(level=logging.DEBUG)
```

### 2. 환경변수 설정
```bash
# Windows
set NODE_ENV=development
set JAVA_HOME=C:\Program Files\Java\jdk-21

# Linux/Mac
export NODE_ENV=development
export JAVA_HOME=/usr/lib/jvm/java-21-openjdk
```

### 3. 방화벽 설정
- Windows Defender 방화벽에서 포트 5173, 8080, 8001, 5432 허용
- 회사 네트워크에서는 IT 부서와 협의 필요

---

## 🎯 성공적인 설치 확인 방법

### 1. 모든 서비스 정상 실행 확인
```bash
# 1. Docker PostgreSQL
docker ps | grep postgres

# 2. Spring Boot API
curl http://localhost:8080/actuator/health

# 3. FastAPI
curl http://localhost:8001/docs

# 4. Vite Frontend
curl http://localhost:5173
```

### 2. 브라우저에서 확인
- Frontend: http://localhost:5173
- Spring Boot API: http://localhost:8080
- FastAPI Docs: http://localhost:8001/docs

### 3. 데이터베이스 연결 확인
```bash
# PostgreSQL 접속
docker exec -it lifebit_postgres psql -U lifebit_user -d lifebit_db

# 테이블 목록 확인
\dt
```

---

## 📞 추가 지원

문제가 지속되는 경우:
1. 프로젝트 README.md 확인
2. 각 기술 스택 공식 문서 참조
3. 개발팀에 문의

**마지막 업데이트:** 2024년 12월 19일
**작성자:** 개발팀
**버전:** 1.0 