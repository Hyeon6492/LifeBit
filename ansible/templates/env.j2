# ================================================
# LifeBit 환경 변수 설정 ({{ environment }})
# ================================================

# 데이터베이스 설정 (PostgreSQL)
POSTGRES_DB={{ POSTGRES_DB | default('lifebit_db') }}
POSTGRES_USER={{ POSTGRES_USER | default('lifebit_user') }}
POSTGRES_PASSWORD={{ POSTGRES_PASSWORD | default('lifebit_password') }}
POSTGRES_PORT={{ POSTGRES_PORT | default('5432') }}

# Redis 설정
REDIS_PASSWORD={{ REDIS_PASSWORD | default('lifebit_redis_secure_pass') }}
REDIS_PORT=6379

# Spring Boot 설정
SPRING_PROFILES_ACTIVE=docker
JWT_SECRET={{ JWT_SECRET | default('defaultSecretKey12345678901234567890') }}
JWT_SECRET_KEY={{ JWT_SECRET_KEY | default('defaultSecretKey12345678901234567890') }}
JWT_ALGORITHM={{ JWT_ALGORITHM | default('HS256') }}

# CORS 설정 (동적 IP 포함)
CORS_ORIGINS=http://{{ ansible_default_ipv4.address }}:3000,http://{{ ansible_default_ipv4.address }}:8082,http://localhost:3000,http://localhost:5173,http://localhost:8082,http://127.0.0.1:5173

LOG_LEVEL={{ LOG_LEVEL | default('info') }}

# AI API 설정
OPENAI_API_KEY={{ OPENAI_API_KEY | default('your-api-key-here') }}
USE_GPT={{ USE_GPT | default('True') }}

# 소셜 로그인 설정 (동적 IP 포함)
KAKAO_CLIENT_ID={{ KAKAO_CLIENT_ID | default('YOUR_KAKAO_CLIENT_ID') }}
KAKAO_REDIRECT_URI=http://{{ ansible_default_ipv4.address }}:3000/auth/kakao/callback
GOOGLE_CLIENT_ID={{ GOOGLE_CLIENT_ID | default('YOUR_GOOGLE_CLIENT_ID') }}
GOOGLE_CLIENT_SECRET={{ GOOGLE_CLIENT_SECRET | default('YOUR_GOOGLE_CLIENT_SECRET') }}
GOOGLE_REDIRECT_URI=http://{{ ansible_default_ipv4.address }}:3000/auth/google/callback

# Airflow 설정
AIRFLOW_FERNET_KEY={{ AIRFLOW_FERNET_KEY | default('lifebit_airflow_fernet_key_32_chars_minimum_required') }}
AIRFLOW_ADMIN_USER={{ AIRFLOW_ADMIN_USER | default('admin') }}
AIRFLOW_ADMIN_PASSWORD={{ AIRFLOW_ADMIN_PASSWORD | default('admin123') }}

# Grafana 설정
GRAFANA_ADMIN_USER={{ GRAFANA_ADMIN_USER | default('admin') }}
GRAFANA_ADMIN_PASSWORD={{ GRAFANA_ADMIN_PASSWORD | default('grafana_secure_password') }}

# 환경 정보
ENVIRONMENT={{ environment }}
PROJECT_NAME={{ project_name }}

# 서버 정보
SERVER_IP={{ ansible_default_ipv4.address }}

# 메모리 제한 (환경별 최적화)
{% if environment == 'prod' %}
POSTGRES_MAX_MEMORY=1024
REDIS_MAX_MEMORY=512
{% else %}
POSTGRES_MAX_MEMORY=512
REDIS_MAX_MEMORY=256
{% endif %} 